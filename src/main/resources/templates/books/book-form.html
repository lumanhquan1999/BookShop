<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: html_head">
	
	<!-- Required meta tags 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

     Bootstrap CSS 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	<title>Save Book</title> 
	-->
</head>

<body>

	<div class="container">
	
		<h3>Book Directory</h3>
		<hr>
		
		<p class="h4 mb-4">Save Book</p>
		
		<form th:action="@{/books/save}"
						 th:object="${book}" method="POST"
						 enctype="multipart/form-data">
		
			<input type="hidden" th:field="*{id}"/>
			
			<input type="text" th:field="*{name}"
					class="form-control mb-4 col-4" placeholder="Name">
					
			<input type="text" th:field="*{category.name}"
					class="form-control mb-4 col-4" placeholder="Category">
			
			<input type="text" th:field="*{publisher.name}"
					class="form-control mb-4 col-4" placeholder="Publisher">
					
			<input type="text" th:field="*{price}"
					class="form-control mb-4 col-4" placeholder="Price">
					
			<input type="number" th:field="*{quantity}"
					class="form-control mb-4 col-4" placeholder="Quantity">
					
			<input type="date" th:field="*{releaseDate}"
					class="form-control mb-4 col-4" placeholder="Release Date">
		
			<label>Image:</label>
			<input type="file" name="fileImage" id="fileImage" accept="{image/png, image/jpeg}"/>
			<br>
			<img id="thumbnail" alt="Image Preview"/>
			
			<br><br>
			<button type="submit" class="btn btn-info col-2">Save</button>
		</form>
	
		<hr>
		<a th:href="@{/books/list}">Back to Book</a>
	</div>

	<div th:replace="fragments :: footer"></div>
	
	<script type="text/javascript">
		$(document).ready(function() {
			
			$('#fileImage').change(function() {
				showImageThumbnail(this);
			});
		}
		);
		
		function showImageThumbnail(fileInput) {
			file = fileInput.files[0];
			reader = new FileReader();
			
			reader.onload = function(e) {
				$('#thumbnail').attr('src', e.target.result);
			};
			
			reader.readAsDataURL(file);
		}
	</script>
	
</body>